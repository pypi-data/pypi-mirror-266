"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4063],{4123:(t,a,e)=>{e.r(a),e.d(a,{default:()=>H});var l=e(641),o=e(33);const s={class:"card"},i={class:"card-body"},d=(0,l.Lk)("h1",null,"Search Tags",-1),g=(0,l.Lk)("hr",null,null,-1),n={class:"row"},r={class:"col-md-4"},c=(0,l.Lk)("strong",null,"Tags",-1),u=(0,l.Lk)("p",{class:"text-instructions"}," Use the search bar to help you find any tags. ",-1),h={class:"text-instructions"},T=(0,l.Lk)("p",{class:"text-instructions"},' To add in any new tags - please click on the "New Tag" button. ',-1),p={class:"col-md-8 tag-list"},m=["onDblclick"],k=["onClick"],b=(0,l.Lk)("hr",null,null,-1),C={class:"row submit-row"},f={class:"col-md-12"};var x=e(2243),y=e(9336),v=e(2321),_=e(3751);const L={class:"modal fade",id:"editTagModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editTagModalLabel","aria-hidden":"true"},w={class:"modal-dialog"},M={class:"modal-content"},A=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h5",{class:"modal-title",id:"editTagModalLabel"}," Edit Tag "),(0,l.Lk)("button",{type:"button",id:"editTagCloseModal",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),I={class:"modal-body"},N={class:"row"},$=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Edit Tags"),(0,l.Lk)("p",{class:"text-instructions"}," Please give the tag an appropriate name. Please do not pick an existing tag name. ")],-1),U={class:"col-md-8"},E=(0,l.Lk)("label",null,"Tag Name",-1),S=(0,l.Lk)("hr",null,null,-1),R={class:"row"},D=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Pick Colour"),(0,l.Lk)("p",{class:"text-instructions"}," Please choose a background and text colour for your tag. ")],-1),F={class:"col-md-8"},B={class:"form-group"},P=(0,l.Lk)("label",null,"Background Colour",-1),X={class:"form-group"},W=(0,l.Lk)("label",null,"Text Colour",-1),q=(0,l.Lk)("hr",null,null,-1),Q={class:"modal-footer"},O=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),j=["disabled"];var z=e(2124);const G={name:"EditTagModal",components:{NColorPicker:e(9979).A},props:{existingTags:{type:Array,default:()=>[]},tagColour:{type:String,default:""},tagId:{type:Number,default:0},tagName:{type:String,default:""},tagTextColour:{type:String,default:""}},data(){return{tagColourModel:this.tagColour,tagNameModel:this.tagName,tagTextColourModel:this.tagTextColour}},watch:{tagColour(){this.tagColourModel=this.tagColour},tagName(){this.tagNameModel=this.tagName},tagTextColour(){this.tagTextColourModel=this.tagTextColour}},computed:{...(0,z.L8)({rootUrl:"getRootUrl"}),canSave(){return 0===this.existingTags.filter((t=>t.fields.tag_name.toUpperCase()===this.tagNameModel.toUpperCase()&&t.pk!==this.tagId)).length}},methods:{deleteTag(){this.axios.post(`${this.rootUrl}tag/delete/${this.tagId}/`).then((t=>{this.$emit("delete_tag",{tag_id:this.tagId}),document.getElementById("editTagCloseModal").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error deleting tag",message:`Sorry we could not delete your tag. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))},getClasses(t){let a="single-colour";return t===this.tagColourModel&&(a=`${a} selected-colour`),a},newTag(t){this.$store.dispatch("newToast",{header:"New Tag",message:"Creating new Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/new/`,t).then((t=>{this.$store.dispatch("newToast",{header:"Tag Saved",message:"Tag has been successfully saved",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("new_tag",t.data),document.getElementById("editTagCloseModal").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Can not create new tag",message:`Sorry, we could not create your new tag. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))},saveTag(){const t=new FormData;t.set("tag_id",this.tagId),t.set("tag_name",this.tagNameModel),t.set("tag_colour",this.tagColourModel),t.set("tag_text_colour",this.tagTextColourModel),0===this.tagId?this.newTag(t):this.updateTag(t)},updateColour(t){this.tagColourModel=t},updateTag(t){this.$store.dispatch("newToast",{header:"Updating Tag",message:"Updating Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/save/`,t).then((()=>{this.$store.dispatch("newToast",{header:"Tag Updated",message:"Tag has been updated successfully",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("update_tags",{tag_id:this.tagId,tag_name:this.tagNameModel,tag_colour:this.tagColourModel,tag_text_colour:this.tagTextColourModel}),document.getElementById("editTagCloseModal").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Can not update tag",message:`Sorry, we could not update your tag. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))}}};var K=e(6262);const V={name:"SearchTags",components:{EditTagModal:(0,K.A)(G,[["render",function(t,a,e,s,i,d){const g=(0,l.g2)("n-color-picker");return(0,l.uX)(),(0,l.CE)("div",L,[(0,l.Lk)("div",w,[(0,l.Lk)("div",M,[A,(0,l.Lk)("div",I,[(0,l.Lk)("div",N,[$,(0,l.Lk)("div",U,[E,(0,l.bo)((0,l.Lk)("input",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=t=>i.tagNameModel=t)},null,512),[[_.vModelText,i.tagNameModel]])])]),S,(0,l.Lk)("div",R,[D,(0,l.Lk)("div",F,[(0,l.Lk)("div",B,[P,(0,l.bF)(g,{"show-alpha":!1,value:i.tagColourModel,"onUpdate:value":a[1]||(a[1]=t=>i.tagColourModel=t),modes:["hex"]},null,8,["value"])]),(0,l.Lk)("div",X,[W,(0,l.bF)(g,{value:i.tagTextColourModel,"onUpdate:value":a[2]||(a[2]=t=>i.tagTextColourModel=t),"show-alpha":!1,modes:["hex"]},null,8,["value"]),(0,l.Lk)("span",null,(0,o.toDisplayString)(i.tagTextColourModel),1)]),q,(0,l.Lk)("div",{class:"single-tag",style:(0,o.normalizeStyle)(`margin-right:0;background-color:${i.tagColourModel};color:${i.tagTextColourModel};`)},(0,o.toDisplayString)(i.tagNameModel),5)])])]),(0,l.Lk)("div",Q,[0!==e.tagId?((0,l.uX)(),(0,l.CE)("button",{key:0,type:"button",class:"btn btn-danger delete-tag",onClick:a[3]||(a[3]=(...t)=>d.deleteTag&&d.deleteTag(...t))}," Delete Tag ")):(0,l.Q3)("v-if",!0),O,(0,l.Lk)("button",{type:"button",class:"btn btn-primary",disabled:!d.canSave,onClick:a[4]||(a[4]=(...t)=>d.saveTag&&d.saveTag(...t))}," Save Tag ",8,j)])])])])}]]),Icon:v.In},props:{rootUrl:{type:String,default:"/"},tagResults:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},data(){return{singleTagColour:"",singleTagId:0,singleTagName:"#37cbd2",singleTagTextColour:"#ffffff",localTagResults:this.tagResults}},mixins:[x.A],methods:{addTag(){this.singleTagName="default tag",this.singleTagId=0,this.singleTagColour="#37cbd2",this.singleTagTextColour="#ffffff",new y.aF(document.getElementById("editTagModal")).show()},deleteTag(t){this.localTagResults=this.localTagResults.filter((a=>a.pk!==t.tag_id))},editTag(t){let a=this.localTagResults.filter((a=>a.pk===t))[0];this.singleTagName=a.fields.tag_name,this.singleTagId=t,this.singleTagColour=a.fields.tag_colour,this.singleTagTextColour=a.fields.tag_text_colour,new y.aF(document.getElementById("editTagModal")).show()},newTag(t){this.localTagResults.push(t[0])},updateTags(t){let a=this.localTagResults.findIndex((a=>a.pk===t.tag_id));this.localTagResults[a].fields.tag_name=t.tag_name,this.localTagResults[a].fields.tag_colour=t.tag_colour,this.localTagResults[a].fields.tag_text_colour=t.tag_text_colour}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},H=(0,K.A)(V,[["render",function(t,a,e,x,y,v){const _=(0,l.g2)("Icon"),L=(0,l.g2)("edit-tag-modal");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",i,[d,g,(0,l.Lk)("div",n,[(0,l.Lk)("div",r,[c,u,(0,l.Lk)("p",h,[(0,l.eW)(" Click on the icon "),(0,l.bF)(_,{icon:t.icons.infoCircle},null,8,["icon"]),(0,l.eW)(" to edit the tag. ")]),T]),(0,l.Lk)("div",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.localTagResults,(a=>((0,l.uX)(),(0,l.CE)("div",{key:a.pk,style:(0,o.normalizeStyle)(`background-color: ${a.fields.tag_colour};color: ${a.fields.tag_text_colour}`),onDblclick:t=>v.editTag(a.pk),class:"single-tag"},[(0,l.eW)((0,o.toDisplayString)(a.fields.tag_name)+" ",1),(0,l.Lk)("span",{onClick:t=>v.editTag(a.pk)},[(0,l.bF)(_,{icon:t.icons.infoCircle},null,8,["icon"])],8,k)],44,m)))),128))]),(0,l.Q3)(" ADD NEW TAG BUTTON "),b,(0,l.Lk)("div",C,[(0,l.Lk)("div",f,[e.userLevel>=2?((0,l.uX)(),(0,l.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:a[0]||(a[0]=(...t)=>v.addTag&&v.addTag(...t))},"Add Tag")):(0,l.Q3)("v-if",!0)])])]),(0,l.Q3)(" MODALS "),(0,l.bF)(L,{"existing-tags":y.localTagResults,"tag-colour":y.singleTagColour,"tag-id":y.singleTagId,"tag-name":y.singleTagName,"tag-text-colour":y.singleTagTextColour,onNew_tag:v.newTag,onDelete_tag:a[1]||(a[1]=t=>v.deleteTag(t)),onUpdate_tags:v.updateTags},null,8,["existing-tags","tag-colour","tag-id","tag-name","tag-text-colour","onNew_tag","onUpdate_tags"])])])}]])},2243:(t,a,e)=>{e.d(a,{A:()=>A});var l=e(8998),o=e(102),s=e(9394),i=e(2438),d=e(9605),g=e(3438),n=e(5666),r=e(6375),c=e(1647),u=e(7066),h=e(4397),T=e(4603),p=e(7432),m=e(1758),k=e(8959),b=e(9587),C=e(9675),f=e(386),x=e(6120),y=e(8086),v=e(5617),_=e(6325),L=e(6500),w=e(5707),M=e(1511);const A={data:()=>({icons:{arrowUp:l.A,bugIcon:o.A,bxBriefcase:s.A,cardChecklist:i.A,clipboardIcon:d.A,documentPdf:g.A,documentText:n.A,folderIcon:r.A,groupPresentation:c.A,imageIcon:u.A,infoCircle:h.A,linkIcon:T.A,linkIcon2:p.A,linkOut:m.A,mailIcon:k.A,microsoftExcel:b.A,microsoftPowerpoint:C.A,microsoftWord:f.A,noteAdd:x.A,objectStorage:y.A,passwordIcon:v.A,trashCan:_.A,userIcon:L.A,usersIcon:w.A,xCircle:M.A}})}}}]);