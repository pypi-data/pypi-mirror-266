(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{1622:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/data",function(){return s(7394)}])},4626:function(e,t,s){"use strict";s.d(t,{Z:function(){return j}});var n=s(5893),i=s(7294),o=s(1163),r=s(9008),a=s.n(r),c=s(3946),l=s(8849),d=s(5317),h=s(8298),u=s(2734),m=s(2293),p=s(5582),k=s(155),y=s(6886),g=s(9417),w=s(5861),b=s(5616);function x(e){let{children:t}=e,s=(0,h.Z)({disableHysteresis:!0,threshold:24});return(0,i.cloneElement)(t,{elevation:s?4:0})}var f=function(){let e=(0,u.Z)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{color:"transparent",elevation:0,children:(0,n.jsx)(p.Z,{maxWidth:"xl",sx:{padding:0},children:(0,n.jsx)(k.Z,{sx:{minHeight:50,maxHeight:50,padding:0,flex:1,alignItems:"center",justifyContent:"space-between",display:"flex",flexWrap:"nowrap"},children:(0,n.jsx)(y.ZP,{item:!0,children:(0,n.jsx)(g.Z,{href:"https://system-bridge.timmo.dev",target:"_blank",children:(0,n.jsx)(w.Z,{component:"div",variant:"h4",sx:{textTransform:"none",userSelect:"none",color:e.palette.primary.contrastText},children:"System Bridge"})})})})})}),(0,n.jsx)(b.Z,{sx:{height:e.spacing(10)}})]})})})};let S=!1;var j=function(e){let t=(0,o.useRouter)();return(0,i.useEffect)(()=>{if(t.isReady&&!S){var e,s,n,i;S=!0;let o=(null===(e=t.query)||void 0===e?void 0:e.token)||"",r=(null===(s=t.query)||void 0===s?void 0:s.apiPort)||"9170",a=!1;if((null===(n=t.query)||void 0===n?void 0:n.token)||(a=!0,o=window.prompt("Please enter your Token",o)),(null===(i=t.query)||void 0===i?void 0:i.apiPort)||(a=!0,r=window.prompt("Please enter your API port (default: 9170)",r)),a&&o&&r){let e=t.asPath.split("?")[0];t.replace({pathname:e.includes(".html")?e:"".concat(e,".html"),query:{...t.query,token:o,apiPort:r}})}}},[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,n.jsx)("link",{rel:"canonical",href:e.url}),(0,n.jsx)("meta",{name:"description",content:e.description?"".concat(e.description):e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,n.jsx)("meta",{name:"keywords",content:e.keywords?"".concat(e.keywords):"system-bridge, system, bridge, typescript"})]}),!e.noHeader&&(0,n.jsx)(f,{}),e.closeButton&&(0,n.jsx)(c.Z,{size:"small",sx:{position:"absolute",top:4,right:4,zIndex:1e3},onClick:()=>{window.location.href="http://close.window"},children:(0,n.jsx)(l.Icon,{id:"close",path:d.r5M,size:1})}),e.children]})}},8833:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var n=s(7632);class i{close(){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.close()}async connect(){let e=new WebSocket("ws://".concat(window.location.hostname||"localhost",":").concat(this.port,"/api/websocket"));return await new Promise(t=>{e.onopen=()=>t()}),e.onmessage=e=>{if("string"==typeof e.data){let t=JSON.parse(e.data);t&&this.onEvent&&this.onEvent(t)}},e}isConnected(){var e;return(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}getData(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Get data:",e),this.websocket.send(JSON.stringify({id:(0,n.Z)(),token:this.token,event:"GET_DATA",data:{modules:e}})))}getSettings(){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Get settings"),this.websocket.send(JSON.stringify({id:(0,n.Z)(),token:this.token,event:"GET_SETTINGS",data:{}})))}registerDataListener(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Register data listener:",e),this.websocket.send(JSON.stringify({id:(0,n.Z)(),token:this.token,event:"REGISTER_DATA_LISTENER",data:{modules:e}})))}sendPlayerStatus(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.send(JSON.stringify({id:(0,n.Z)(),token:this.token,event:"MEDIA_STATUS",data:{status:e}}))}updateSettings(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&(console.log("Update setting:",e),this.websocket.send(JSON.stringify({id:(0,n.Z)(),token:this.token,event:"UPDATE_SETTINGS",data:e})))}constructor(e,t,s){this.port=e||9170,this.token=t,(async()=>{this.websocket=await this.connect(),s&&this.websocket&&this.websocket.readyState===this.websocket.OPEN&&s()})()}}},7394:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var n,i,o=s(5893),r=s(7294),a=s(5582),c=s(1163),l=s(2734),d=s(1730),h=s(916),u=s(44),m=s(6886),p=s(8456),k=s(361),y=s.n(k),g=s(8849),w=s.n(g),b=s(5317);(n=i||(i={})).Battery="battery",n.CPU="cpu",n.Disks="disks",n.Displays="displays",n.GPUs="gpus",n.Media="media",n.Memory="memory",n.Networks="networks",n.Processes="processes",n.Sensors="sensors",n.System="system";let x=Object.values(i),f={battery:{name:"Battery",icon:b.Z8d},cpu:{name:"CPU",icon:b.NZV},disks:{name:"Disks",icon:b.V72},displays:{name:"Displays",icon:b.K2U},gpus:{name:"GPUs",icon:b.m01},media:{name:"Media",icon:b.w3r},memory:{name:"Memory",icon:b.Mp7},networks:{name:"Networks",icon:b.flG},processes:{name:"Processes",icon:b.$2A},sensors:{name:"Sensors",icon:b.sVq},system:{name:"System",icon:b.hu7}};var S=s(8833),j=s(5861),v=s(5152);let P=s.n(v)()(()=>s.e(171).then(s.t.bind(s,5171,23)),{loadableGenerated:{webpack:()=>[5171]},ssr:!1});function E(e){let{title:t,data:s}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.Z,{gutterBottom:!0,variant:"h4",component:"h3",children:t}),s?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(P,{collapseStringsAfterLength:120,displayDataTypes:!1,displayObjectSize:!0,enableClipboard:!0,name:null,shouldCollapse:e=>(console.log(e),!!(e.name&&"array"===e.type&&Array.isArray(e.src))&&e.src.length>2),src:s,style:{background:"initial",maxWidth:"100%"},theme:"google"})}):(0,o.jsx)(m.ZP,{container:!0,direction:"row",justifyContent:"center",children:(0,o.jsx)(p.Z,{})})]})}var Z=function(){let[e,t]=(0,r.useState)({}),[s,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(0),k=(0,c.useRouter)().query,g=(0,r.useCallback)(e=>{console.log("New event:",e),"DATA_UPDATE"===e.type&&t(t=>{let s=y()(t),n=e.data,i={};return Object.keys(n).sort().forEach(e=>{i[e]=n[e]}),s[e.module]=i,s})},[]),b=(0,r.useCallback)((e,t)=>{console.log("Setup WebSocketConnection");let s=new S.C(e,t,async()=>{s.getData(x),s.registerDataListener(x)});s.onEvent=e=>g(e)},[g]);(0,r.useEffect)(()=>{!s&&k&&k.token&&(n(!0),b(Number(k.apiPort)||9170,String(k.token)))},[s,b,k]),console.log("Data:",e);let j=(0,l.Z)(),v=(0,d.Z)(j.breakpoints.down("md"));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z,{allowScrollButtonsMobile:!0,centered:!v,onChange:(e,t)=>{a(t)},scrollButtons:"auto",variant:v?"scrollable":"fullWidth",value:i,sx:{marginBottom:j.spacing(2)},children:x.map((e,t)=>(0,o.jsx)(u.Z,{icon:(0,o.jsx)(w(),{path:f[e].icon,size:1}),label:f[e].name,sx:{minWidth:"auto"}},t))}),(0,o.jsx)(m.ZP,{container:!0,alignItems:"stretch",direction:"column",spacing:2,sx:{padding:j.spacing(2)},children:(0,o.jsx)(m.ZP,{item:!0,xs:!0,children:x.map((t,s)=>(0,o.jsx)(r.Fragment,{children:i===s?(0,o.jsx)(o.Fragment,{children:e[t]?(0,o.jsx)(E,{title:f[t].name,data:e[t]}):(0,o.jsx)(m.ZP,{container:!0,direction:"row",justifyContent:"center",sx:{margin:j.spacing(8,0,14)},children:(0,o.jsx)(p.Z,{})})}):""},s))})})]})},N=s(4626),T=function(){return(0,o.jsx)(N.Z,{title:"Data",url:"https://system-bridge.timmo.dev",description:"Frontend for System Bridge",children:(0,o.jsx)(a.Z,{component:"article",maxWidth:"xl",children:(0,o.jsx)(Z,{})})})}}},function(e){e.O(0,[702,870,8,734,873,888,774,179],function(){return e(e.s=1622)}),_N_E=e.O()}]);